<img src="https://img.shields.io/badge/Nginx-009639?style=for-the-badge&logo=nginx&logoColor=white" /> <img src="https://img.shields.io/badge/Node.js-339933?style=for-the-badge&logo=nodedotjs&logoColor=white" /> <img src="https://img.shields.io/badge/TypeScript-007ACC?style=for-the-badge&logo=typescript&logoColor=white" /> <img src="https://img.shields.io/badge/eslint-3A33D1?style=for-the-badge&logo=eslint&logoColor=white" /> <img src="https://img.shields.io/badge/prettier-1A2C34?style=for-the-badge&logo=prettier&logoColor=F7BA3E" />
<img src="https://img.shields.io/badge/Docker-2CA5E0?style=for-the-badge&logo=docker&logoColor=white" /> <img src="https://img.shields.io/badge/Jest-C21325?style=for-the-badge&logo=jest&logoColor=white" /> <img src="https://img.shields.io/badge/Swagger-85EA2D?style=for-the-badge&logo=Swagger&logoColor=white" />

# Hotel Booking Service

## Description

The task is to create a hotel booking service but there are a few constraints. A description of the original assignment is here:
After the contagious pandemic is over, Panoramic Hotel is now accepting booking of its only presidential suite. You are going to design and develop a back-end service to provide the REST APIs to manage the booking of the presidential suite. Each booking allows up to 3 people for up to 3 days.

## Technology stack

- TypeScript
- Node.js
- Express
- In-memory storage
- Nginx
- Docker
- Axios
- Jest
- Swagger

**Overview of the Project**

The project contains one small Node based microservice: Booking Service, where user can book rooms.

**Top Level Project Structure**

`root` - root directory contains nginx config, makefile, docker, docker-compose and other such config files to run the whole project.

`src` - it contains the codes for `Booking Service`

Documentation about the API is autogenerated with Swagger and it is available under the `http://localhost:3000/api-docs`

## Prerequisites

You need to have `node` installed on your computer to run the service.

### Run locally

- Clone this repository and then cd into `bell-booking-service`:

```
git clone https://github.com/tamzidkarim/bell-booking-service
```

- Intall all the dependencies

```
npm i
```

- Run the project

```
npm start
```


**Example - Booking a reservation**

Request:

```

curl --location --request POST 'http://localhost:3000/api/v1.0/bookings' \
--header 'Content-Type: application/json' \
--data-raw '{
    "email": "a@a.com",
    "firstName": "John",
    "lastName": "Doe",
    "checkIn": "2023-01-21",
    "checkOut": "2023-01-23",
    "totalGuests": 3,
    "roomType": "presidential suite"
}'

```

Response:

```

{
    "data": {
        "id": "d458babe-7f4c-481f-aa67-6290822dfe12",
        "cancelLink": "http://localhost:3000/api/v1.0/bookings/d458babe-7f4c-481f-aa67-6290822dfe12/cancel",
        "detailsLink": "http://localhost:3000/api/v1.0/bookings/d458babe-7f4c-481f-aa67-6290822dfe12"
    },
    "message": "Your booking was successful"
}

```

**Example - Retrieve Booking Details**

Request:

```

curl --location --request GET 'http://localhost:3000/api/v1.0/bookings/d458babe-7f4c-481f-aa67-6290822dfe12'

```

Response:

```

{
    "data": {
        "id": "d458babe-7f4c-481f-aa67-6290822dfe12",
        "name": "John Doe",
        "email": "a@a.com",
        "firstName": "John",
        "lastName": "Doe",
        "checkIn": "2023-01-21",
        "checkOut": "2023-01-23",
        "totalGuests": 3,
        "roomType": "presidential suite",
        "status": "confirmed"
    },
    "message": "Booking details"
}

```

**Example - Cancel a Booking**

Request:

```

curl --location --request GET 'http://localhost:3000/api/v1.0/bookings/d458babe-7f4c-481f-aa67-6290822dfe12/cancel'

```

Response:

```

{
    "data": {
        "id": "d458babe-7f4c-481f-aa67-6290822dfe12",
        "name": "John Doe",
        "email": "a@a.com",
        "firstName": "John",
        "lastName": "Doe",
        "checkIn": "2023-01-21",
        "checkOut": "2023-01-23",
        "totalGuests": 3,
        "roomType": "presidential suite",
        "status": "cancelled"
    },
    "message": "Booking details"
}

```

### Postman collection

Inside postman collection you can find all the example requests. Here is the link for postman collection https://api.postman.com/collections/10153488-b74699a1-eb86-4090-af44-52a4303721b3?access_key=PMAT-01GPZSK9F38WQTZG8FCW8BKQA4.

## Tests

**Run tests locally**

With npm

```

npm test

```

Code coverage is 93.58%.

### API docs (swagger)

API docs is generated using open api specification and swagger. The swagger documentation can be accessed through following url.

```

http://localhost:3000/api-docs

```

OR,

```

http://localhost/api-docs

```
